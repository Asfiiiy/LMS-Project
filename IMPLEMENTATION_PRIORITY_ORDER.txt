================================================================================
IMPLEMENTATION PRIORITY ORDER - FOLLOW THIS SEQUENCE
================================================================================

STEP 1: DATABASE SETUP (DO THIS FIRST)
---------------------------------------
[ ] 1.1 Create student_profiles table migration
[ ] 1.2 Create student_payment_installments table migration
[ ] 1.3 Run migrations and verify tables

STEP 2: BACKEND API - CORE ENDPOINTS
---------------------------------------
[ ] 2.1 Create studentProfile.js routes
    - GET /api/student/profile
    - PUT /api/student/profile
    - GET /api/admin/students/profiles
    - GET /api/admin/students/:studentId/profile
    - GET /api/tutor/students/profiles (filter by tutor's students)

[ ] 2.2 Create paymentInstallments.js routes
    - GET /api/admin/students/:studentId/installments
    - POST /api/admin/enrollments/:courseId/:studentId/installments
    - PATCH /api/admin/installments/:installmentId/status
    - GET /api/tutor/students/:studentId/installments

[ ] 2.3 Update auth.js to return profile status
[ ] 2.4 Update admin.js to create profile on user creation

STEP 3: ENROLLMENT SETUP PAGE (DO THIS FIRST FOR UI - REDIRECT AFTER ENROLLMENT)
----------------------------------------------------------------------------------
NOTE: This is the page that opens when admin/tutor enrolls a student.
      It combines deadline setup + payment setup in one page.

[ ] 3.0 Create enrollment setup page structure
    File: app/dashboard/admin/enrollments/[courseId]/[studentId]/setup/page.tsx
    - This is the main page that combines everything
    - Will be completed in Step 7, but create structure first

STEP 4: ADMIN/TUTOR DASHBOARD - SHARED COMPONENTS
-------------------------------------------------------------------
[ ] 4.1 Create shared StudentsProfileView component
    File: app/components/StudentsProfileView.tsx
    - Reusable for both admin and tutor
    - Props: userRole ('Admin' | 'Tutor')
    - Table: Name, Email, Profile Status, Last Updated, Actions
    - Search/filter, pagination
    - Click row to view full profile

[ ] 4.2 Create admin students profile page
    File: app/dashboard/admin/students/profile/page.tsx
    - Uses StudentsProfileView with userRole='Admin'

[ ] 4.3 Create tutor students profile page
    File: app/dashboard/tutor/students/profile/page.tsx
    - Uses StudentsProfileView with userRole='Tutor'

[ ] 4.4 Create StudentProfileDetail component
    File: app/components/StudentProfileDetail.tsx
    - Modal/page showing full profile
    - Used by both admin and tutor

[ ] 4.5 Add "Students Profile" tab to admin dashboard
[ ] 4.6 Add "Students Profile" tab to tutor dashboard

[ ] 4.7 Create shared PaymentManagementView component
    File: app/components/PaymentManagementView.tsx
    - Reusable for both admin and tutor
    - Props: userRole ('Admin' | 'Tutor')
    - List students with payments
    - Filter: All, Due, Overdue, Paid
    - Search by student name

[ ] 4.8 Create admin payments page
    File: app/dashboard/admin/payments/page.tsx
    - Uses PaymentManagementView with userRole='Admin'

[ ] 4.9 Create tutor payments page
    File: app/dashboard/tutor/payments/page.tsx
    - Uses PaymentManagementView with userRole='Tutor'

[ ] 4.10 Add "Payments" tab to admin dashboard
[ ] 4.11 Add "Payments" tab to tutor dashboard

[ ] 4.12 Create PaymentStatusUpdate component
    File: app/components/PaymentStatusUpdate.tsx
    - Update payment status (Paid/Due/Overdue)
    - Add payment reference, date, notes
    - Used by both admin and tutor

STEP 5: API SERVICE INTEGRATION
--------------------------------
[ ] 5.1 Add profile API methods to api.ts
[ ] 5.2 Add payment API methods to api.ts
[ ] 5.3 Add error handling

STEP 6: STUDENT PROFILE COMPLETION
-----------------------------------
[ ] 5.1 Create complete-profile page
[ ] 5.2 Create StudentProfileForm component
[ ] 5.3 Create ProfilePictureUpload component
[ ] 5.4 Create ProfileIncompleteWarning component

STEP 7: STUDENT PROFILE PAGE
------------------------------
[ ] 7.1 Create student profile page (view/edit)
[ ] 7.2 Add profile link to student dashboard
[ ] 7.3 Show warning popup if incomplete

STEP 8: ENROLLMENT SETUP PAGE (REDIRECT AFTER ENROLLMENT)
-----------------------------------------------------------
IMPORTANT: When admin/tutor enrolls a student, redirect to this page to set:
- Deadlines for topics/units
- Payment installments

[ ] 7.1 Create enrollment setup page
    File: app/dashboard/admin/enrollments/[courseId]/[studentId]/setup/page.tsx
    Route: /dashboard/admin/enrollments/:courseId/:studentId/setup
    - Page header: Show course name and student name
    - Section 1: Deadline Setup
      * Reuse DeadlineSetupModal logic (convert to page section)
      * Show all topics/units with deadline inputs
      * Pre-fill with course default deadlines if available
    - Section 2: Payment Setup
      * Payment type selector: "All Paid" radio button
      * Payment type selector: "Installment" radio button
      * If "All Paid": Hide table, show confirmation message
      * If "Installment": Show PaymentInstallmentTable component
    - Save button at bottom: Saves both deadlines AND installments
    - Cancel button: Go back to enrollment list
    - After save: Redirect to enrollment list or course view

[ ] 7.2 Create PaymentInstallmentTable component
    File: app/components/PaymentInstallmentTable.tsx
    - Editable table with columns:
      * No. (auto-increment, read-only)
      * Instalment (text input)
      * Amount (number input with £ currency)
      * Due Date (date picker, can be null)
      * Status (dropdown: Paid/Due/Overdue)
    - "Add Row" button: Adds new row with default values
    - "Remove Row" button per row: Removes row (disable if only one row)
    - Auto-number rows (No. column updates automatically)
    - Form validation

[ ] 7.3 Update enrollment flow to redirect to setup page
    File: app/dashboard/admin/page.tsx (or wherever enrollment happens)
    - After successful enrollment:
      * Instead of showing deadline popup, redirect to:
      * /dashboard/admin/enrollments/:courseId/:studentId/setup
    - Pass courseId and studentId in URL
    - This applies to both admin and tutor enrollment flows

[ ] 7.4 Create DeadlineSetupSection component (extract from modal)
    File: app/components/DeadlineSetupSection.tsx
    - Extract deadline setup logic from DeadlineSetupModal
    - Convert to page section (not modal)
    - Show all topics/units
    - Allow setting deadlines for each
    - Support both CPD topics and Qualification units

STEP 9: STUDENT PAYMENT VIEWS
-------------------------------
[ ] 9.1 Create student payments page
[ ] 9.2 Create PaymentDueNotification component
[ ] 9.3 Add notifications to student dashboard

STEP 10: NOTIFICATIONS & AUTO-UPDATES
-------------------------------------
[ ] 9.1 Implement due date notification system
[ ] 9.2 Auto-calculate overdue status
[ ] 9.3 Background job for status updates (optional)

STEP 11: UI/UX ENHANCEMENTS
----------------------------
[ ] 11.1 VARK visualization
[ ] 11.2 Profile completion progress
[ ] 11.3 Payment summary components
[ ] 11.4 Responsive design polish

STEP 12: TESTING & VALIDATION
------------------------------
[ ] 12.1 Test all flows
[ ] 12.2 Test validation
[ ] 12.3 Test responsive design

STEP 13: DOCUMENTATION & POLISH
--------------------------------
[ ] 13.1 Add help text and tooltips
[ ] 13.2 Document API endpoints
[ ] 13.3 Final polish

================================================================================
ENROLLMENT FLOW DIAGRAM
================================================================================

1. Admin/Tutor clicks "Enroll Student" in course
   ↓
2. Select student(s) and click "Enroll"
   ↓
3. Backend creates enrollment record
   ↓
4. REDIRECT to: /dashboard/admin/enrollments/:courseId/:studentId/setup
   ↓
5. Enrollment Setup Page shows:
   ├─ Section 1: Deadline Setup
   │  └─ All topics/units with deadline inputs
   │
   └─ Section 2: Payment Setup
      ├─ Payment Type: ○ All Paid  ○ Installment
      └─ If Installment: Payment Installment Table
         ├─ Add Row button
         ├─ Remove Row button (per row)
         └─ Columns: No., Instalment, Amount, Due Date, Status
   ↓
6. Admin/Tutor fills in deadlines and payment info
   ↓
7. Click "Save" button
   ↓
8. Backend saves:
   ├─ Deadlines to student_topic_deadlines table
   └─ Installments to student_payment_installments table
   ↓
9. Redirect to enrollment list or course view
   ↓
10. Done! Student is enrolled with deadlines and payment plan

================================================================================
KEY FILES TO CREATE (SHARED COMPONENTS APPROACH)
================================================================================

SHARED COMPONENTS (Used by both Admin & Tutor):
------------------------------------------------
1. app/components/StudentsProfileView.tsx
   - Main component for viewing all students' profiles
   - Props: userRole, onViewProfile(studentId)

2. app/components/StudentProfileDetail.tsx
   - Modal/page showing full student profile
   - Props: studentId, isOpen, onClose

3. app/components/PaymentManagementView.tsx
   - Main component for managing payments
   - Props: userRole, onUpdateStatus(installmentId)

4. app/components/PaymentStatusUpdate.tsx
   - Form to update payment status
   - Props: installmentId, onSave, onCancel

ADMIN PAGES:
------------
1. app/dashboard/admin/students/profile/page.tsx
   - Wraps StudentsProfileView with userRole='Admin'

2. app/dashboard/admin/payments/page.tsx
   - Wraps PaymentManagementView with userRole='Admin'

TUTOR PAGES:
------------
1. app/dashboard/tutor/students/profile/page.tsx
   - Wraps StudentsProfileView with userRole='Tutor'
   - May filter to show only tutor's students

2. app/dashboard/tutor/payments/page.tsx
   - Wraps PaymentManagementView with userRole='Tutor'
   - May filter to show only tutor's students

BACKEND ROUTES:
---------------
1. backend/routes/studentProfile.js
   - All profile-related endpoints

2. backend/routes/paymentInstallments.js
   - All payment-related endpoints

================================================================================
IMPLEMENTATION STRATEGY
================================================================================

1. Create shared components first (Step 3)
   - This allows both admin and tutor to use the same code
   - Easier to maintain and update
   - Consistent UI/UX

2. Create wrapper pages for admin and tutor
   - Simple pages that import shared components
   - Pass appropriate userRole prop
   - Add role-specific filtering if needed

3. Add tabs to dashboards
   - Link to the new pages
   - Show relevant counts/badges

4. Test with both admin and tutor roles
   - Ensure permissions work correctly
   - Verify filtering works for tutors

================================================================================
END OF PRIORITY ORDER
================================================================================

